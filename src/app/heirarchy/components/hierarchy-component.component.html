<app-header />

<div class="container">
  <h2>Hierarchy Structure</h2>
  <div class="table-responsive">
    <table class="lookup-table">
      <thead>
        <tr>
          <th>Hierarchy Level</th>
        </tr>
      </thead>
      <tbody>
        <!-- Level 1: Lookups -->
        <tr *ngFor="let lookup of hierarchy">
          <td>
            <button (click)="toggleLookup(lookup.name)">
              {{ expandedLookups.has(lookup.name) ? '-' : '+' }}
            </button>
            {{ lookup.name }}
            <!-- Level 2: Main Entities -->
            <table *ngIf="expandedLookups.has(lookup.name)" class="lookup-table nested-table level-1">
              <tbody>
                <tr *ngFor="let mainEntity of lookup.mainEntities; let isEven = even">
                  <td [class.even-row]="isEven">
                    <button (click)="toggleMainEntity(mainEntity.name)">
                      {{ expandedMainEntities.has(mainEntity.name) ? '-' : '+' }}
                    </button>
                    {{ mainEntity.name }}
                    <!-- Level 3: Child Details -->
                    <table *ngIf="expandedMainEntities.has(mainEntity.name)" class="lookup-table nested-table level-2">
                      <tbody>
                        <tr *ngFor="let childDetail of mainEntity.childDetails; let isEven = even">
                          <td [class.even-row]="isEven">
                            <button (click)="toggleChildDetail(childDetail.name)">
                              {{ expandedChildDetails.has(childDetail.name) ? '-' : '+' }}
                            </button>
                            {{ childDetail.name }}
                            <!-- Level 4: Sub-Child Entities -->
                            <table *ngIf="expandedChildDetails.has(childDetail.name)" class="lookup-table nested-table level-3">
                              <tbody>
                                <tr *ngFor="let subChild of childDetail.subChildEntities; let isEven = even">
                                  <td [class.even-row]="isEven">{{ subChild.name }}</td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>